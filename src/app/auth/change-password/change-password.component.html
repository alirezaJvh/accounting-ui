<div class="w-100 h-100">
  <mat-drawer-container dir="rtl" class="h-100">
    <mat-drawer style="min-width: 40%;"
                #snav
                mode="over">
      <mat-nav-list>
        <a mat-list-item
           class="px-2"
           *ngFor="let item of menu">{{item.text}}</a>
      </mat-nav-list>
    </mat-drawer>

    <mat-drawer-content class="h-100 w-100">
      <app-main-menu [logo]="true"
                     [snav]="!recoveryPassword ? null: snav"
                     [profile]="recoveryPassword ? false: true"
                     [mainMenu]="recoveryPassword ? false: true">
      </app-main-menu>
      <div class="w-100 wrapper">
        <div class="row w-75 mx-auto content d-flex justify-content-center align-items-center">
          <div class="col-6 col-xl-5 d-none d-xl-flex justify-content-center my-auto">
            <img src="../../../assets/image/login/change-password.svg"
                 class="image"/>
          </div>
          <div
            class="col-12 col-lg-6 col-xl-7 pb-2  d-flex justify-content-center align-items-center align-items-md-start">
            <div class="pt-lg-4 forms-container  text-center">
              <div style="color: #707070"
                   class="mat-title">
                تغیر رمز عبور
              </div>
              <form *ngIf="!recoveryPassword"
                    [formGroup]="passwordForm"
                    class="pt-2">
                <div dir="rtl">
                  <mat-form-field class="w-100"
                                  appearance="outline">
                    <mat-label>رمز عبور فعلی</mat-label>
                    <input formControlName="old"
                           matInput
                           required
                           [type]="type.oldPass"
                           placeholder="رمز عبور فعلی"/>
                    <mat-icon matSuffix
                              *ngIf="type.oldPass === 'password'"
                              (click)="type.oldPass = 'text'"
                              style="cursor: pointer">
                      <img src="../../../assets/image/login/eye-slash-solid.svg" width="25">
                    </mat-icon>
                    <mat-icon matSuffix
                              *ngIf="type.oldPass === 'text'"
                              (click)="type.oldPass = 'password'"
                              style="cursor: pointer">
                      <img src="../../../assets/image/login/eye-solid.svg" width="25">
                    </mat-icon>
                    <mat-error *ngIf="passwordForm.get('old').hasError('required')">
                      این فیلد الزامی است
                    </mat-error>
                    <mat-error *ngIf="passwordForm.get('old').hasError('maxlength')">
                      حداکثر ۱۰۰ کاراکتر
                    </mat-error>
                  </mat-form-field>
                </div>
                <div dir="rtl">
                  <mat-form-field class="w-100"
                                  appearance="outline">
                    <mat-label>رمز عبور جدید</mat-label>
                    <input formControlName="new"
                           matInput
                           [type]="type.newPass"
                           required
                           placeholder="رمز عبور جدید"/>
                    <mat-icon matSuffix
                              *ngIf="type.newPass === 'password'"
                              (click)="type.newPass = 'text'"
                              style="cursor: pointer">
                      <img src="../../../assets/image/login/eye-slash-solid.svg" width="25">
                    </mat-icon>
                    <mat-icon matSuffix
                              *ngIf="type.newPass === 'text'"
                              (click)="type.newPass = 'password'"
                              style="cursor: pointer">
                      <img src="../../../assets/image/login/eye-solid.svg" width="25">
                    </mat-icon>
                    <mat-error *ngIf="passwordForm.get('new').hasError('required')">
                      این فیلد الزامی است
                    </mat-error>
                    <mat-error *ngIf="passwordForm.get('new').hasError('maxlength')">
                      حداکثر ۱۰۰ کاراکتر
                    </mat-error>
                  </mat-form-field>
                </div>
                <div dir="rtl">
                  <mat-form-field class="w-100"
                                  appearance="outline">
                    <mat-label>تکرار رمز عبور جدید</mat-label>
                    <input formControlName="repeat"
                           matInput
                           [type]="type.repeatPass"
                           required
                           placeholder="تکرار رمز عبور جدید"/>
                    <mat-icon matSuffix
                              *ngIf="type.repeatPass === 'password'"
                              (click)="type.repeatPass = 'text'"
                              style="cursor: pointer">
                      <img src="../../../assets/image/login/eye-slash-solid.svg" width="25">
                    </mat-icon>
                    <mat-icon matSuffix
                              *ngIf="type.repeatPass === 'text'"
                              (click)="type.repeatPass = 'password'"
                              style="cursor: pointer">
                      <img src="../../../assets/image/login/eye-solid.svg" width="25">
                    </mat-icon>
                    <mat-error *ngIf="passwordForm.get('repeat').hasError('required')">
                      این فیلد الزامی است
                    </mat-error>
                    <mat-error *ngIf="passwordForm.get('repeat').hasError('maxlength')">
                      حداکثر ۱۰۰ کاراکتر
                    </mat-error>
                  </mat-form-field>
                </div>
                <button mat-flat-button
                        (click)="submit()"
                        class="py-1 mt-2 btn">
                  تایید
                </button>
              </form>
              <!--@@@@@@@@@@@@@@@@@ recover password @@@@@@@@@@@@@@@@@@@@@-->
              <form *ngIf="recoveryPassword"
                    [formGroup]="recoveryForm">
                <div dir="rtl">
                  <mat-form-field class="w-100"
                                  appearance="outline">
                    <mat-label>رمز عبور جدید</mat-label>
                    <input formControlName="new"
                           matInput
                           [type]="type.newPass"
                           required
                           placeholder="رمز عبور جدید"/>
                    <mat-icon matSuffix
                              *ngIf="type.newPass === 'password'"
                              (click)="type.newPass = 'text'"
                              style="cursor: pointer">
                      <img src="../../../assets/image/login/eye-slash-solid.svg" width="25">
                    </mat-icon>
                    <mat-icon matSuffix
                              *ngIf="type.newPass === 'text'"
                              (click)="type.newPass = 'password'"
                              style="cursor: pointer">
                      <img src="../../../assets/image/login/eye-solid.svg" width="25">
                    </mat-icon>
                    <mat-error *ngIf="recoveryForm.get('new').hasError('required')">
                      این فیلد الزامی است
                    </mat-error>
                    <mat-error *ngIf="recoveryForm.get('new').hasError('maxlength')">
                      حداکثر ۱۰۰ کاراکتر
                    </mat-error>
                  </mat-form-field>
                </div>
                <div dir="rtl">
                  <mat-form-field class="w-100"
                                  appearance="outline">
                    <mat-label>تکرار رمز عبور جدید</mat-label>
                    <input formControlName="repeat"
                           matInput
                           [type]="type.repeatPass"
                           required
                           placeholder="تکرار رمز عبور جدید"/>
                    <mat-icon matSuffix
                              *ngIf="type.repeatPass === 'password'"
                              (click)="type.repeatPass = 'text'"
                              style="cursor: pointer">
                      <img src="../../../assets/image/login/eye-slash-solid.svg" width="25">
                    </mat-icon>
                    <mat-icon matSuffix
                              *ngIf="type.repeatPass === 'text'"
                              (click)="type.repeatPass = 'password'"
                              style="cursor: pointer">
                      <img src="../../../assets/image/login/eye-solid.svg" width="25">
                    </mat-icon>
                    <mat-error *ngIf="recoveryForm.get('repeat').hasError('required')">
                      این فیلد الزامی است
                    </mat-error>
                    <mat-error *ngIf="recoveryForm.get('repeat').hasError('maxlength')">
                      حداکثر ۱۰۰ کاراکتر
                    </mat-error>
                  </mat-form-field>
                </div>
                <button mat-flat-button
                        (click)="doRecovery()"
                        class="py-1 mt-2 btn">
                  تایید
                </button>
              </form>
            </div>
          </div>
        </div>
      </div>
      <div class="row justify-content-around footer"
           style="margin: 0">
        <div class="col-xl-2 d-none d-xl-block"></div>
      </div>
    </mat-drawer-content>
  </mat-drawer-container>
</div>
